<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
    <link rel="stylesheet" href="/static/fonts/whitney.css">

    <title>PreMatch Discord Integration</title>
</head>
<body class="no-padding is-fullheight">
<div class="columns is-fullheight" id="container">
    <div class="column side has-text-centered is-fullheight" id="discord-side">
        <div class="columns is-narrow"
             style="flex-direction: column; min-height: 102vh; padding: 2vh 0; overflow: hidden;">
            <div class="column">
                <img id="logo" src="/static/img/discord.png">
            </div>
            <section class="column"
                     style="display: flex;flex-direction: column;align-items: center; justify-content: center; max-width: 100%; -webkit-flex: 1 0 auto;">
                <div style="flex: 1;">
                    {% for counter in range(3) %}
                        <div class="user-container other-user">
                            <div class="user-img">
                                <figure class="user-pfp">
                                    <img src="/static/img/discord%20pfp.png" height="75" width="75">
                                </figure>
                            </div>
                            <div class="user-info">
                                <p class="title has-text-light username">Name here</p>
                                <p class="subtitle has-text-grey id">#0000</p>
                            </div>
                        </div>
                    {% endfor %}
                    <div class="user-container is-user">
                        <div class="user-img">
                            <figure class="user-pfp">
                                <img src="{{ avatar_src }}" alt="{{ user_name }}" id="pfp" height="100" width="100">
                            </figure>
                        </div>
                        <div class="user-info">
                            <p class="title has-text-light username">{{ user_name }}</p>
                            <p class="subtitle has-text-grey id" id="user-id">#{{ user_discriminator }}</p>
                        </div>
                    </div>
                    {% for counter in range(3) %}
                        <div class="user-container other-user">
                            <div class="user-img">
                                <figure class="user-pfp">
                                    <img src="/static/img/discord%20pfp.png" height="75" width="75">
                                </figure>
                            </div>
                            <div class="user-info">
                                <p class="title has-text-light username">Name here</p>
                                <p class="subtitle has-text-grey id">#0000</p>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </section>
        </div>
    </div>
    <div class="column is-2 is-fullheight" id="blend">
        <h1 class="is-size-2 is-size-4-mobile" id="success">Success!</h1>
        <h2 class="is-size-2 is-size-4-mobile" id="now-try">Now try $$myday.</h2>
    </div>
    <div class="column side has-text-centered is-fullheight" id="prematch-side">
        <div class="column-inner">
            <img id="logo" src="/static/img/PreMatch%20Logo.png">
            <div>
                <div class="container">
                    <h1 class="title is-size-1 has-text-white is-size-3-mobile">
                        {{ name }}
                    </h1>
                    <h2 class="subtitle is-size-3 is-size-5-mobile" style="color:#ddd">
                        {{ handle }}
                    </h2>
                </div>
            </div>
        </div>
    </div>
    <div id="chain"></div>
</div>
<style>
    #discord-side {
        background-color: #36393f;
        color: #dcddde;
        font-family: 'Whitney', sans-serif;
    }

    .user-pfp img {
        border-radius: 50%;
    }

    #prematch-side {
        background-color: #03A9F4;
        color: #fff;
    }

    #logo {
        height: 150px;
    }

    .side {
        width: calc((100vw - 200px) / 2);
    }

    .column {
        padding: 0 0;
        flex: 1;
    }

    .column-inner {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        width: 100%;
        flex-direction: column;
    }

    #blend {
        background: linear-gradient(to right, #36393f, #03A9F4);
        width: 200px;
        align-content: center;
        color: white;
        display: flex;
        justify-content: center;
        font-family: Whitney, sans-serif;
    }

    #success {
        position: absolute;
        top: 80px;
    }

    #now-try {
        position: absolute;
        bottom: 80px;
    }

    .columns {
        min-height: 420px;
        margin-bottom: 0 !important;
    }

    #chain {
        background: url('/static/img/chains.png') repeat-x center;
        width: 200px;
        height: 100%;
    }

    .user-img, .user-info {
        flex: 1;
    }

    .user-img {
        max-width: 75px;
    }

    .user-info {
        padding-left: 10px;
    }

    .user-container {
        display: flex;
        border-radius: 5px;
        padding: 8px;
        text-align: left;
        align-items: center;
    }

    .username {
        font-size: 30px;
    }

    .id {
        font-size: 20px;
    }

    .user-container.is-user {
        background-color: rgba(79, 84, 92, .6);
    }

    .user-container.is-user .user-img {
        max-width: 100px;
    }

    .user-container.is-user .user-info {
        margin-right: 10px;
    }

    .user-container.is-user .username {
        font-size: 48px;
    }

    .user-container.is-user .id {
        font-size: 32px;
    }
</style>
<script type="text/javascript">
    let bgColors = ['#f04747', '#faa61a', '#7289da', '#747f8d', '#43b581'];
    let names = ["Anakin Skywalker", "Luke Skywalker", "Darth Vader", "Obi-Wan Kenobi", "Leia Organa", "R2-D2", "C-3PO", "Chewbacca", "Han Solo", "Darth Maul"];
    let otherIds = [];

    function getRandomInt(max) {
        return Math.floor(Math.random() * Math.floor(max));
    }

    Array.prototype.forEach.call(document.getElementsByClassName('other-user'), (userCont) => {
        let pic = userCont.getElementsByTagName('img')[0];
        pic.style.backgroundColor = bgColors[getRandomInt(bgColors.length)];
        let name = userCont.getElementsByClassName('username')[0];
        let namesId = getRandomInt(names.length)
        name.innerHTML = names[namesId];
        names.splice(namesId, 1);
        let userId = document.getElementById('user-id').innerHTML.substr(1);
        let id = '';
        while (true) {
            for (let i = 0; i < 4; i++) {
                id += getRandomInt(10);
            }

            if (id === userId || otherIds.includes(id)) {
                id = '';
                continue;
            }

            otherIds.push(id);
            break;
        }

        let idText = userCont.getElementsByClassName('id')[0];
        idText.innerHTML = "#" + id;
    });
</script>
</body>
</html>